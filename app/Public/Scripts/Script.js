function changeServer(e){""!=e.options[e.selectedIndex].value?window.location="index.php?server="+e.options[e.selectedIndex].value:window.location="index.php"}function changeCluster(e){""!=e.options[e.selectedIndex].value?window.location="stats.php?cluster="+e.options[e.selectedIndex].value:window.location="stats.php"}function show(e){var t=document.getElementsByClassName(e);for(i=0;i<t.length;i++)t[i].style.display=""}function hide(e){var t=document.getElementsByClassName(e);for(i=0;i<t.length;i++)t[i].style.display="none"}function changeCommand(e){document.getElementById("request_key").value="",document.getElementById("request_duration").value="",document.getElementById("request_data").value="",document.getElementById("request_delay").value="",document.getElementById("request_value").value="";var t=e.options[e.selectedIndex].value,n=document.getElementById("div_key"),s=document.getElementById("div_duration"),l=document.getElementById("div_data"),r=document.getElementById("div_delay"),d=document.getElementById("div_value");"get"==t||"delete"==t?(n.style.display="",s.style.display="none",l.style.display="none",r.style.display="none",d.style.display="none"):"set"==t?(n.style.display="",s.style.display="",l.style.display="",r.style.display="none",d.style.display="none"):"flush_all"==t?(n.style.display="none",s.style.display="none",l.style.display="none",r.style.display="",d.style.display="none"):"increment"==t||"decrement"==t?(n.style.display="",s.style.display="none",l.style.display="none",r.style.display="none",d.style.display=""):(n.style.display="none",s.style.display="none",l.style.display="none",r.style.display="none",d.style.display="none")}function executeHideShow(e,t,n){var s=document.getElementById(e);t=document.getElementById(t);"block"==s.style.display&&1!=n?(t.value="Show Console",s.style.visibility="hidden",s.style.display="none"):(s.style.visibility="visible",s.style.display="block",t.value="Hide Console")}function executeClear(e){document.getElementById(e).innerHTML=""}function executeCommand(e,t){null==t?""==document.getElementById("request_command").value||execute("commands.php?request_command="+document.getElementById("request_command").value+"&request_key="+document.getElementById("request_key").value+"&request_duration="+document.getElementById("request_duration").value+"&request_data="+document.getElementById("request_data").value+"&request_delay="+document.getElementById("request_delay").value+"&request_value="+document.getElementById("request_value").value+"&request_server="+document.getElementById("request_server").value+"&request_api="+document.getElementById("request_api").value,e,!0):execute("commands.php?"+t,e,!0)}function searchKey(e){""!=document.getElementById("search_key").value&&execute("commands.php?request_command=search&request_key="+document.getElementById("search_key").value+"&request_server="+document.getElementById("search_server").value,e,!0)}function executeTelnet(e){""!=document.getElementById("request_telnet").value&&execute("commands.php?request_command=telnet&request_telnet="+document.getElementById("request_telnet").value+"&request_server="+document.getElementById("request_telnet_server").value,e,!0)}function execute(e,t,n){window.XMLHttpRequest?(req=new XMLHttpRequest,req.onreadystatechange=function(){onExecute(t,n)},req.open("GET",e,!0),req.send(null)):window.ActiveXObject&&(req=new ActiveXObject("Microsoft.XMLHTTP"),req&&(req.onreadystatechange=function(){onExecute(t,n)},req.open("GET",e,!0),req.send()))}function onExecute(e,t){if(1==req.readyState)document.getElementById("loading").style.visibility="visible";else if(4==req.readyState){var n;if(document.getElementById("loading").style.visibility="hidden",200==req.status||304==req.status)if(1==t)(n=document.getElementById(e)).innerHTML+=req.responseText,n.scrollTop=n.scrollHeight;else(n=document.getElementById(e)).innerHTML=req.responseText,n.scrollTop=n.scrollHeight}else document.getElementById("loading").style.visibility="hidden"}var server_id=1,cluster_id=1;function addCluster(){var e=document.createElement("div");cluster_id++,e.innerHTML='<hr/><strong>Cluster <input type="text" style="width:200px;" name="cluster['+cluster_id+']" value=""/></strong><div style="margin-left:30px;margin-top:3px;"><div style="width:150px;float:left;">Name (Optionnal)</div><div style="width:150px;float:left;margin-left:7px;">IP/Hostname</div><div style="width:50px;float:left;margin-left:7px;">Port</div></div><div style="margin-left:40px;margin-top:6px;" id="cluster_'+cluster_id+'_commands"><a class="list button" href="javascript:addServer('+cluster_id+')">Add New Server to Cluster</a> <a class="list" style="padding:1px 2px;-moz-border-radius:3px;-webkit-border-radius:3px;" href="#" onclick="deleteServerOrCluster(\'cluster_'+cluster_id+"')\">Delete Cluster</a></div><br/>",e.setAttribute("id","cluster_"+cluster_id),document.getElementById("server_form").appendChild(e),addServer(cluster_id)}function addServer(e){var t=document.createElement("div");server_id++,t.innerHTML='<div style="margin-left:30px;margin-top:3px;"><input type="text" style="width:150px;" name="server['+e+"]["+server_id+'][name]"\t\t  value="" id="name_'+server_id+'" onchange="nameOnChange('+server_id+') onKeyUp="hostOrPortOnChange('+server_id+')""/> <input type="text" style="width:150px;" name="server['+e+"]["+server_id+'][hostname]"       value="hostname" id="host_'+server_id+'" onfocus="hostOnFocus(this)" onblur="hostOnBlur(this)" onchange="hostOrPortOnChange('+server_id+')"       onchange="hostOrPortOnChange('+server_id+')" onKeyUp="hostOrPortOnChange('+server_id+')" /> <input type="text" style="width:50px;" name="server['+e+"]["+server_id+'][port]"       value="port" id="port_'+server_id+'" onfocus="portOnFocus(this)" onblur="portOnBlur(this) onchange="hostOrPortOnChange('+server_id+')"/> <a class="list button" style="padding:1px 2px;" href="#" onclick="deleteServerOrCluster(\'server_'+server_id+"')\">Delete</a></div>",t.setAttribute("id","server_"+server_id),console.log(document.getElementById("cluster_"+e)),document.getElementById("cluster_"+e).insertBefore(t,document.getElementById("cluster_"+e+"_commands"))}function deleteServerOrCluster(e){var t=document.getElementById(e);t.parentNode.removeChild(t)}function nameOnChange(e){portObject=document.getElementById("port_"+e),portObject.setAttribute("onchange","return false;"),hostObject=document.getElementById("host_"+e),hostObject.setAttribute("onchange","return false;")}function hostOnFocus(e){"hostname"==e.value&&(e.value="")}function hostOnBlur(e){""==e.value&&(e.value="hostname")}function hostOnChange(e){document.getElementById(e),""==object.value&&(object.value="port")}function portOnFocus(e){"port"==e.value&&(e.value="")}function portOnBlur(e){""==e.value&&(e.value="port")}function hostOrPortOnChange(e){nameObject=document.getElementById("name_"+e),hostObject=document.getElementById("host_"+e),portObject=document.getElementById("port_"+e),""!=nameObject.value&&nameObject.value==hostObject.value+":"+portObject.value||(nameObject.value=hostObject.value+":"+portObject.value)}function ajax(e,t){window.XMLHttpRequest?(req=new XMLHttpRequest,req.onreadystatechange=function(){ajaxDone(t)},req.open("GET",e,!0),req.send(null)):window.ActiveXObject&&(req=new ActiveXObject("Microsoft.XMLHTTP"),req&&(req.onreadystatechange=function(){ajaxDone(t)},req.open("GET",e,!0),req.send())),setTimeout("ajax(page, 'stats')",timeout)}function ajaxDone(e){4==req.readyState&&(200==req.status||304==req.status?(results=req.responseText,document.getElementById(e).innerHTML=results):document.getElementById(e).innerHTML="Loading stats error : "+req.statusText)}